<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Relq: Glitch Reaper</title>
  <style>
    body {
      margin: 0;
      background: #050608;
      overflow: hidden;
      color: white;
      font-family: Arial, sans-serif;
    }
    #hud {
      position: fixed;
      top: 10px;
      left: 10px;
      font-weight: bold;
      z-index: 10;
    }
    .overlay {
      position: fixed;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      background: rgba(0,0,0,0.8);
      color: white;
      font-size: 24px;
      font-weight: bold;
      z-index: 20;
    }
    .hidden { display: none; }
    button {
      margin: 10px;
      padding: 10px 20px;
      background: #222;
      color: white;
      border: 1px solid #444;
      cursor: pointer;
      font-size: 18px;
    }
    button:hover { background: #444; }
  </style>
</head>
<body>
  <canvas id="game" width="1280" height="720"></canvas>
  <div id="hud">Score: <span id="score">0</span></div>

  <!-- Menu Overlay -->
  <div id="menu" class="overlay">
    <div>RELQ: GLITCH REAPER</div>
    <button onclick="startGame()">Start</button>
  </div>

  <!-- Game Over Overlay -->
  <div id="gameOver" class="overlay hidden">
    <div>GAME OVER</div>
    <div>Your Score: <span id="finalScore">0</span></div>
    <button onclick="restartGame()">Restart</button>
    <button onclick="showMenu()">Main Menu</button>
  </div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let W = canvas.width, H = canvas.height;

// Load Relq sprite
const relqImg = new Image();
relqImg.src = "relq-sprite.png";  // Must be uploaded to repo

// Game State
let player, shots, enemies, score, hp, keys, mouse, lastTime, state;
const STATE = { MENU:0, PLAY:1, OVER:2 };

// Player setup
function resetPlayer() {
  player = { x: W/2, y: H/2, angle: 0, speed: 300, cooldown: 0 };
  shots = [];
  enemies = [];
  score = 0;
  hp = 100;
}

// Input
keys = {};
mouse = { x: W/2, y: H/2, down:false };
addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);
addEventListener("mousemove", e => { mouse.x = e.clientX; mouse.y = e.clientY; });
addEventListener("mousedown", ()=>mouse.down=true);
addEventListener("mouseup", ()=>mouse.down=false);

// Core loop
function loop(ts) {
  if(!lastTime) lastTime = ts;
  const dt = (ts - lastTime)/1000;
  lastTime = ts;

  if(state === STATE.PLAY) {
    update(dt);
    draw();
  }

  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

// Update
function update(dt) {
  // movement
  let vx=0,vy=0;
  if(keys["w"]||keys["arrowup"]) vy-=1;
  if(keys["s"]||keys["arrowdown"]) vy+=1;
  if(keys["a"]||keys["arrowleft"]) vx-=1;
  if(keys["d"]||keys["arrowright"]) vx+=1;
  const mag = Math.hypot(vx,vy)||1;
  vx/=mag; vy/=mag;
  player.x = Math.max(0, Math.min(W, player.x + vx*player.speed*dt));
  player.y = Math.max(0, Math.min(H, player.y + vy*player.speed*dt));

  // angle
  const dx = mouse.x - player.x, dy = mouse.y - player.y;
  player.angle = Math.atan2(dy,dx);

  // cooldown
  if(player.cooldown>0) player.cooldown-=dt;

  // shooting
  if(mouse.down && player.cooldown<=0){
    shots.push({x:player.x,y:player.y,vx:Math.cos(player.angle)*600,vy:Math.sin(player.angle)*600});
    player.cooldown=0.25; // delay between shots
  }

  // shots
  for(let i=shots.length-1;i>=0;i--){
    let s=shots[i];
    s.x+=s.vx*dt; s.y+=s.vy*dt;
    if(s.x<0||s.y<0||s.x>W||s.y>H) shots.splice(i,1);
  }

  // enemies
  if(Math.random()<0.02) enemies.push({x:Math.random()*W,y:Math.random()*H,hp:1});
  for(let i=enemies.length-1;i>=0;i--){
    let e=enemies[i];
    const dx=player.x-e.x, dy=player.y-e.y, d=Math.hypot(dx,dy)||1;
    e.x+=dx/d*60*dt; e.y+=dy/d*60*dt;
    // hit player
    if(d<30){ enemies.splice(i,1); hp-=10; if(hp<=0) gameOver(); continue; }
    // hit by shot
    for(let j=shots.length-1;j>=0;j--){
      let s=shots[j];
      if(Math.hypot(e.x-s.x,e.y-s.y)<20){
        enemies.splice(i,1); shots.splice(j,1); score+=50;
        break;
      }
    }
  }

  document.getElementById("score").textContent=score;
}

// Draw
function draw() {
  ctx.clearRect(0,0,W,H);

  // player sprite
  ctx.save();
  ctx.translate(player.x,player.y);
  ctx.rotate(player.angle);
  ctx.drawImage(relqImg,-32,-32,64,64); // sprite size
  ctx.restore();

  // shots
  ctx.fillStyle="red";
  for(const s of shots) ctx.fillRect(s.x-3,s.y-3,6,6);

  // enemies
  ctx.fillStyle="lime";
  for(const e of enemies) ctx.beginPath(), ctx.arc(e.x,e.y,15,0,Math.PI*2), ctx.fill();
}

// State transitions
function startGame(){
  resetPlayer();
  state=STATE.PLAY;
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("gameOver").classList.add("hidden");
}
function gameOver(){
  state=STATE.OVER;
  document.getElementById("finalScore").textContent=score;
  document.getElementById("gameOver").classList.remove("hidden");
}
function restartGame(){ startGame(); }
function showMenu(){
  state=STATE.MENU;
  document.getElementById("menu").classList.remove("hidden");
  document.getElementById("gameOver").classList.add("hidden");
}
showMenu();

</script>
</body>
</html>
